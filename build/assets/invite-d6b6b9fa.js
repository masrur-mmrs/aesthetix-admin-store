import{a8 as S,q as C,r as q,d4 as k,u as E,j as a,a as e,B as m}from"./index-d61dff85.js";import{c as L,g as P,I as l,u as F}from"./index-9b406524.js";import{l as I}from"./index.modern-6bc9eb11.js";import{P as d,S as n}from"./login-layout-ac473eb5.js";import{S as u}from"./index-784107ff.js";import{F as c}from"./index-aa73cc34.js";const U=()=>{const p=S(),t=C.parse(p.search.substring(1)),[h,g]=q.useState(!1);let i=null;if(t!=null&&t.token)try{i=I(t.token)}catch{i=null}const{register:s,handleSubmit:x,formState:{errors:o},setError:f}=L({defaultValues:{first_name:"",last_name:"",password:"",repeat_password:""}}),{mutate:w,isLoading:v}=k(),y=E(),N=F(),_=x(r=>{if(r.password!==r.repeat_password){f("repeat_password",{type:"manual",message:"Passwords do not match"},{shouldFocus:!0});return}w({token:t.token,user:{first_name:r.first_name,last_name:r.last_name,password:r.password}},{onSuccess:()=>{y("/login")},onError:b=>{N("Error",P(b),"error")}})});return i?a(d,{children:[e(u,{title:"Create Account"}),h?e("form",{onSubmit:_,children:a("div",{className:"flex flex-col items-center",children:[e("h1",{className:"inter-xlarge-semibold mb-large text-[20px]",children:"Create your Medusa account"}),a("div",{className:"gap-y-small flex flex-col",children:[a("div",{children:[e(n,{placeholder:"First name",...s("first_name",{required:c.required("First name")}),autoComplete:"given-name"}),e(l,{errors:o,name:"first_name"})]}),a("div",{children:[e(n,{placeholder:"Last name",...s("last_name",{required:c.required("Last name")}),autoComplete:"family-name"}),e(l,{errors:o,name:"last_name"})]}),e("div",{children:e(n,{placeholder:"Password",type:"password",...s("password",{required:c.required("Password")}),autoComplete:"new-password"})}),a("div",{children:[e(n,{placeholder:"Confirm password",type:"password",...s("repeat_password",{required:"You must confirm your password"}),autoComplete:"new-password"}),e(l,{errors:o,name:"repeat_password"})]})]}),e(m,{variant:"secondary",size:"medium",className:"mt-large w-[280px]",loading:v,children:"Create account"}),a("p",{className:"inter-small-regular text-grey-50 mt-xlarge",children:["Already signed up? ",e("a",{href:"/login",children:"Log in"})]})]})}):a("div",{className:"flex flex-col items-center text-center",children:[e("h1",{className:"inter-xlarge-semibold text-[20px]",children:"You have been invited to join the team"}),a("p",{className:"inter-base-regular text-grey-50 mt-xsmall",children:["You can now join the team. Sign up below and get started",e("br",{}),"with your Medusa account right away."]}),e(m,{variant:"secondary",size:"medium",className:"mt-xlarge w-[280px]",onClick:()=>g(!0),children:"Sign up"})]})]}):a(d,{children:[e(u,{title:"Create Account"}),a("div",{className:"gap-y-xsmall flex flex-col items-center",children:[e("h1",{className:"inter-xlarge-semibold mb- text-[20px]",children:"Invalid invite"}),e("p",{className:"inter-base-regular text-grey-50 w-[280px] text-center",children:"The invite link you have used is invalid. Please contact your administrator."}),a("p",{className:"inter-small-regular text-grey-40 mt-xlarge",children:["Already have an account? ",e("a",{href:"/login",children:"Log in"})]})]})]})};export{U as default};
